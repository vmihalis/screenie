---
phase: 12-demo-creation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - demo/demo.tape
  - demo/demo.gif
  - package.json
autonomous: false
user_setup:
  - service: system-packages
    why: "VHS terminal recording requires system-level dependencies"
    required_action:
      - task: "Install VHS and dependencies"
        command: "sudo pacman -S vhs ttyd gifsicle"

must_haves:
  truths:
    - "Demo GIF shows screenie command being typed"
    - "Demo GIF shows progress spinner and capture output"
    - "Demo GIF shows completion with report path"
    - "GIF file size is under 5MB"
  artifacts:
    - path: "demo/demo.tape"
      provides: "VHS script for reproducible demo recording"
      contains: "screenie"
    - path: "demo/demo.gif"
      provides: "Optimized demo GIF for README and landing page"
      max_size_kb: 5120
  key_links:
    - from: "demo/demo.tape"
      to: "demo/demo.gif"
      via: "vhs command generates GIF from tape"
      pattern: "Output demo/demo.gif"
---

<objective>
Create a high-quality demo GIF showing screenie CLI capturing responsive screenshots.

Purpose: Demo GIF is required for README (Phase 13) and landing page (Phase 14). It's the primary way users understand what screenie does before installing.

Output: demo/demo.gif under 5MB showing full workflow (command -> progress -> completion)
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-demo-creation/12-RESEARCH.md
</context>

<tasks>

<task type="checkpoint:human-action" gate="blocking">
  <name>Task 1: Install VHS Dependencies</name>
  <action>
    VHS requires system-level packages that need sudo. Install the following:

    ```bash
    sudo pacman -S vhs ttyd gifsicle
    ```

    These provide:
    - vhs: Terminal GIF recorder (declarative tape files)
    - ttyd: Terminal web sharing (VHS dependency)
    - gifsicle: GIF optimization with lossy compression

    ffmpeg is already installed (verified in research).
  </action>
  <verify>
    Run these commands to confirm installation:
    ```bash
    vhs --version
    ttyd --version
    gifsicle --version
    ```
    All should return version numbers without errors.
  </verify>
  <resume-signal>Type "installed" when VHS dependencies are ready</resume-signal>
</task>

<task type="auto">
  <name>Task 2: Create VHS Tape File and Generate Demo GIF</name>
  <files>demo/demo.tape, demo/demo.gif, package.json</files>
  <action>
    1. Create demo/ directory at project root

    2. Create demo/demo.tape with these specifications:
       - Output: demo/demo.gif
       - Require: screenie (fail fast if not available)
       - Terminal: 850x450, FontSize 18, Framerate 12
       - Theme: "Catppuccin Mocha" (modern, readable)
       - TypingSpeed: 50ms (natural but fast)
       - WindowBar: Colorful (professional look)

       Demo sequence:
       a. Hide setup, cd to /tmp, clear terminal
       b. Show typing: screenie https://example.com --phones-only
       c. Wait 500ms, then Enter
       d. Wait ~12s for capture completion (adjust based on timing)
       e. Final 2s pause to show completion message

       Use --phones-only to keep demo short (~14 devices instead of 57)

    3. Run VHS to generate initial GIF:
       ```bash
       cd /home/memehalis/responsiveness-mcp && vhs demo/demo.tape
       ```

    4. Optimize with gifsicle for file size:
       ```bash
       gifsicle -O3 --lossy=80 --colors 200 demo/demo.gif -o demo/demo-optimized.gif
       mv demo/demo-optimized.gif demo/demo.gif
       ```

    5. If GIF exceeds 5MB (5120KB), apply more aggressive optimization:
       ```bash
       gifsicle -O3 --lossy=100 --colors 128 demo/demo.gif -o demo/demo.gif
       ```

    6. Add npm script to package.json for future regeneration:
       ```json
       "scripts": {
         "demo": "vhs demo/demo.tape && gifsicle -O3 --lossy=80 demo/demo.gif -o demo/demo.gif"
       }
       ```

    IMPORTANT timing notes:
    - screenie with --phones-only takes ~8-15 seconds depending on network
    - If demo shows error, example.com may be slow - try httpbin.org instead
    - Adjust Sleep times in tape file based on actual capture timing
  </action>
  <verify>
    1. demo/demo.tape exists and contains "screenie" command
    2. demo/demo.gif exists and is playable
    3. File size check: `du -k demo/demo.gif` shows under 5120 KB
    4. npm script exists: `npm run demo --help` doesn't error
  </verify>
  <done>
    - demo/demo.gif exists under 5MB
    - GIF shows: command typed -> progress output -> completion
    - demo/demo.tape is committed (reproducible)
    - npm run demo script added for regeneration
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Verify Demo GIF Quality</name>
  <what-built>
    Demo GIF showing screenie CLI workflow:
    - Command being typed
    - Progress output during capture
    - Completion message with report path
  </what-built>
  <how-to-verify>
    1. Open demo/demo.gif in a viewer or browser
    2. Watch the full playback and confirm:
       - Command is readable (font size appropriate)
       - Progress spinner/output is visible
       - Completion message shows at end
       - No visual glitches or cut-offs
       - Timing feels natural (not too fast/slow)
    3. Check file size: should be under 5MB
       ```bash
       du -h demo/demo.gif
       ```
  </how-to-verify>
  <resume-signal>Type "approved" if GIF looks good, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Phase 12 verification:

1. File existence:
   ```bash
   ls -la demo/demo.tape demo/demo.gif
   ```

2. File size under 5MB:
   ```bash
   SIZE=$(du -k demo/demo.gif | cut -f1)
   [ "$SIZE" -lt 5120 ] && echo "PASS: ${SIZE}KB < 5MB" || echo "FAIL: ${SIZE}KB >= 5MB"
   ```

3. Tape file contains screenie command:
   ```bash
   grep -q "screenie" demo/demo.tape && echo "PASS" || echo "FAIL"
   ```

4. npm script added:
   ```bash
   grep -q '"demo"' package.json && echo "PASS" || echo "FAIL"
   ```
</verification>

<success_criteria>
- [ ] demo/demo.tape exists with VHS script for reproducible recording
- [ ] demo/demo.gif exists and is under 5MB
- [ ] GIF shows full workflow: command -> progress -> completion
- [ ] npm run demo script added to package.json for regeneration
- [ ] Human verified GIF quality (readable, proper timing)
</success_criteria>

<output>
After completion, create `.planning/phases/12-demo-creation/12-01-SUMMARY.md`
</output>
